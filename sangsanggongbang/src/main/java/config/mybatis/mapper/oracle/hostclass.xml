<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.gr.ssgb.hostclass.model.HostClassDAO">
	<select id="selectCategoryAll" resultType="categoryVo">
	 	select * from category order by category_code
	 </select>
	
	<insert id="insertClass" parameterType="hostClassVo">
		<selectKey keyProperty="cNo" resultType="int" order="BEFORE">
			select hostclass_seq.nextval from dual
		</selectKey>
		<selectKey keyProperty="lNo" resultType="int" order="BEFORE">
			select LOCATION_SEQ.nextval from dual
		</selectKey>
		<selectKey keyProperty="contentsNo" resultType="int" order="BEFORE">
			select C_CONTENTS_SEQ.nextval from dual
		</selectKey>
		insert all 

        into Location(lNo, lLatitude, lLongitude, 
        	zipcode, lAddress, lAddressDetail)
      	values(#{L_NO}, #{L_LATITUDE}, #{L_LONGITUDE}, 
      		#{ZIPCODE}, #{L_ADDRESS}, #{L_ADDRESS_DETAIL})
        	
		into hostclass(cNo, cName, CateCode, hNo, lNo, cPrice,
         	ppnum, cStart, cEnd, endFlag)
      	values(#{C_NO}, #{C_NAME}, #{CATEGORY_CODE}, #{H_NO}, #{L_NO}, #{C_PRICE},
         	#{PPNUM}, #{C_START_TIME}, #{C_END_TIME}, #{end_Flag})
        
        into C_Contents(contentsNo, cNo, thumbnail,
        	 cFilename, cFilesize, cFileOriginalname)
        values(#{CONTENTS_NO}, #{C_NO}, #{THUMBNAIL},
        	#{CONTENTS_FILENAME}, #{CONTENTS_FILESIZE}, #{CONTENTS_ORIGINALNAME})
        
       	select * dual
	</insert>
	
	
</mapper>